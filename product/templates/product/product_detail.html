{% extends "pages/base.html" %}
{% load static %}

{% block content %}
<style>
.product-detail {
    display: flex;
    flex-wrap: wrap;
    max-width: 1000px;
    margin: 50px auto;
    gap: 30px;
    color: white;
    background: rgba(37, 19, 54, 0.7);
    border-radius: 15px;
    padding: 30px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}

.product-image {
    flex: 1 1 350px;
    text-align: center;
}

.product-image img {
    width: 100%;
    max-width: 400px;
    border-radius: 15px;
    object-fit: cover;
}

.product-info {
    flex: 1 1 350px;
}

.product-info h2 {
    font-size: 2em;
    margin-bottom: 15px;
}

.product-info p {
    font-size: 1em;
    margin-bottom: 15px;
}

.product-info .price {
    font-size: 1.5em;
    font-weight: bold;
    color: #ffcc00;
    margin-bottom: 20px;
}

.product-info .category,
.product-info .tags {
    margin-bottom: 10px;
    font-size: 0.95em;
}

.product-info .tags span {
    background: #9b59b6;
    color: white;
    padding: 5px 10px;
    border-radius: 8px;
    margin-right: 5px;
    display: inline-block;
    margin-bottom: 5px;
}

.cart-btn,
.login-btn,
.btn-back {
    display: inline-block;
    margin-top: 15px;
    padding: 10px 18px;
    border-radius: 8px;
    text-decoration: none;
    background: #9b59b6;
    color: white;
    font-weight: bold;
    transition: 0.3s;
    border: none;
    cursor: pointer;
}

.cart-btn:hover,
.login-btn:hover,
.btn-back:hover {
    background: #8e44ad;
    transform: scale(1.05);
}

@media (max-width: 768px) {
    .product-detail {
        flex-direction: column;
        padding: 20px;
    }

    .product-image img {
        max-width: 100%;
        height: auto;
    }
}
</style>

<div class="product-detail">
    <div class="product-image">
        <img src="{{ product.image.url }}" alt="{{ product.name }}">
    </div>
    <div class="product-info">
        <h2>{{ product.name }}</h2>
        <p>{{ product.description }}</p>

        <!-- Category -->
        {% if product.custom_category %}
        <div class="category"><strong>Category:</strong> {{ product.custom_category.name }}</div>
        {% else %}
        <div class="category"><strong>Category:</strong> {{ product.get_category_display }}</div>
        {% endif %}

        <!-- Tags -->
        {% if product.tags.all %}
        <div class="tags">
            <strong>Tags:</strong>
            {% for tag in product.tags.all %}
                <span>{{ tag.name }}</span>
            {% empty %}
                None
            {% endfor %}
        </div>
        {% endif %}

        <div class="price">&#8358;{{ product.price }}</div>

        <!-- Add to cart -->
        {% if user.is_authenticated %}
            <form method="POST" action="{% url 'add_to_cart' product.id %}">
                {% csrf_token %}
                <button type="submit" class="cart-btn">Add to Cart</button>
            </form>
        {% else %}
            <a href="{% url 'login' %}" class="login-btn">Login to Add</a>
        {% endif %}

        <a href="{% url 'pages_newarrivals' %}" class="btn-back">‚Üê Back to Products</a>
    </div>
</div>
{% endblock %}
