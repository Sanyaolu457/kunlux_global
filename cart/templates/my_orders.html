{% extends "pages/base.html" %}
{% load static %}
{% block content %}

<style>
.orders-container {
  max-width: 900px;
  margin: 60px auto;
  background: rgba(37, 19, 54, 0.61);
  color: white;
  border-radius: 15px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.orders-container h2 {
  text-align: center;
  font-size: 2em;
  margin-bottom: 25px;
  letter-spacing: 1px;
}

.order-card {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  margin-bottom: 20px;
  padding: 20px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  transition: transform 0.2s ease;
}

.order-card:hover {
  transform: translateY(-3px);
}

.order-header {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
}

.order-header strong {
  color: #ffb347;
}

.order-items {
  margin-top: 10px;
  padding-left: 20px;
}

.order-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
}

.order-footer {
  margin-top: 10px;
  text-align: right;
  font-weight: bold;
}

.no-orders {
  text-align: center;
  padding: 40px;
  font-size: 1.2em;
  color: #ccc;
}

@media (max-width: 600px) {
  .order-header {
    flex-direction: column;
    gap: 8px;
  }
}
</style>

<div class="orders-container">
  <h2>My Orders</h2>

  {% if orders %}
    {% for order in orders %}
    <div class="order-card">
      <div class="order-header">
        <p><strong>Order ID:</strong> #{{ order.id }}</p>
        <p><strong>Date:</strong> {{ order.created_at|date:"M d, Y h:i A" }}</p>
      </div>

      <div class="order-header">
        <p><strong>Total:</strong> ₦{{ order.total_price }}</p>
        <p><strong>Payment:</strong> {{ order.get_payment_method_display }}</p>
        <p><strong>Status:</strong>
          {% if order.is_paid %}
            <span style="color:#00e676;">Paid</span>
          {% else %}
            <span style="color:#ffc107;">Pending</span>
          {% endif %}
        </p>
      </div>

      <div class="order-items">
        {% for item in order.items.all %}
        <div class="order-item">
          <span>{{ item.product.name }} (x{{ item.quantity }})</span>
          <span>₦{{ item.subtotal }}</span>
        </div>
        {% endfor %}
      </div>

      <div class="order-footer">
        <p>Total: ₦{{ order.total_price }}</p>
      </div>
    </div>
    {% endfor %}
  {% else %}
    <p class="no-orders">You haven’t placed any orders yet.</p>
  {% endif %}
</div>

{% endblock %}
